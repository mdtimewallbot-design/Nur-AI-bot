        max_tokens = 500

    data = {
        "model": "openai/gpt-4o",
        "max_tokens": max_tokens,
        ndjsjazbs sh"messages": [
            {
                "role": "system",
                "content": (
                    "‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ '‡¶®‡ßÇ‡¶∞' ‚ú®‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶æ‡¶®, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ø‡¶§, ‡¶∏‡¶¨ ‡¶¨‡¶ø‡¶∑‡ßü ‡¶ú‡¶æ‡¶®‡¶æ‡¶∂‡ßÅ‡¶®‡¶æ AI üß†üìö‡•§ "
                    "‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡ßü ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶æ‡¶ì üáßüá©‡•§ Casual chat -> ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ reply‡•§ "
                    "Lesson -> ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡•§ ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã üòä‡•§"
                )
            },
            {"role": "user", "content": user_input}
        ]
    }

    try:
        response = requests.post(
            "https://openrouter.ai/api/v1/chat/completions",
            headers=headers,
            json=data
        )
        reply = response.json()["choices"][0]["message"]["content"]
        await update.message.reply_text(reply)
    except Exception as e:
        print(f"Error: {e}")

async def run_bot():
    application = ApplicationBuilder().token(TELEGRAM_TOKEN).build()
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    print("ü§ñ ‡¶®‡ßÇ‡¶∞ AI ‡¶è‡¶ñ‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶õ‡ßá...")
    await application.run_polling(drop_pending_updates=True)

if __name__ == '__main__':
    # Flask ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶•‡ßç‡¶∞‡ßá‡¶°‡ßá ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    t = Thread(target=run_flask)
    t.start()
    
    # ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ü ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    nest_asyncio.apply()
    asyncio.run(run_bot())
